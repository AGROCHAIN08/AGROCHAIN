<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> <link rel="icon" href="https://ik.imagekit.io/a2wpi1kd9/imgToUrl/image-to-url_ThyEiMVLh"/>
  <title>Farmer Dashboard - AgroChain</title>
  <link rel="stylesheet" href="../assets/css/farmer.css">
  <style>
    @media print {
      body * {
        visibility: hidden;
      }
      #farmerReceiptContent, #farmerReceiptContent * {
        visibility: visible;
      }
      #farmerReceiptContent {
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
      }
      .modal-content button {
        display: none !important;
      }
    }
  </style>
</head>
<body>
  <nav class="navbar">
    <div href="./farmer.html" class="nav-left">
      <img src="https://ik.imagekit.io/a2wpi1kd9/imgToUrl/image-to-url_ThyEiMVLh" alt="AgroChain Logo" class="logo">
      <span class="brand-name">Agro<span class="chain-text">Chain</span></span>
    </div>
    
    <button class="menu-toggle" id="menuToggleBtn">
        â˜°
    </button>
    
    <div class="nav-links-container" id="navLinksContainer">
        <div class="nav-center">
          <a href="#" class="nav-link active" id="navHomeBtn">
            <span class="nav-icon">ğŸŒ¾</span> Inventory
          </a>
          <a href="#" class="nav-link" id="navOrdersBtn">
            <span class="nav-icon">ğŸ“¦</span> Orders
          </a>
        </div>
        
        <div class="nav-right">
          <a href="#" class="nav-link" id="navNotificationBtn">
            <span class="nav-icon">ğŸ””</span>
            <span class="notification-badge" id="notificationBadge" style="display: none;">0</span>
          </a>
          <div class="profile-dropdown">
            <button class="profile-btn" id="profileDropdownBtn">
              <span class="profile-icon">ğŸ‘¤</span>
              <span id="farmerNameDisplay">Farmer</span>
              <span class="dropdown-arrow">â–¼</span>
            </button>
            <div class="profile-dropdown-menu" id="profileDropdownMenu">
              <a href="#" class="dropdown-item" id="viewProfileBtn">
                <span class="dropdown-icon">ğŸ‘¤</span> My Profile
              </a>
              <div class="dropdown-divider"></div>
              <a href="#" class="dropdown-item logout-item" id="navSignoutBtn">
                <span class="dropdown-icon">ğŸšª</span> Sign Out
              </a>
            </div>
          </div>
        </div>
    </div>
  </nav>

  <div class="content">
    <section id="inventorySection">
      <div class="section-header">
        <button class="add-btn" id="addCropToggleBtn">+ Add New Product</button>
      </div>

      <form id="cropForm" style="display:none;" enctype="multipart/form-data">
        <div id="cropError" class="error-message" style="display: none;"></div>
        <div id="successMsg" class="message" style="display: none;"></div>

        <div class="form-row">
          <label>Product Type:
            <select id="productType" required>
              <option value="">Select Product Type</option>
              <option value="Fruit">Fruit</option>
              <option value="Vegetable">Vegetable</option>
              <option value="Cereal">Cereal</option>
              <option value="Spices">Spices</option>
              <option value="Pulses">Pulses</option>
              <option value="Oil Seeds">Oil Seeds</option>
              <option value="Other">Other</option>
            </select>
          </label>
        </div>

        <div class="form-row">
          <label>Variety/Species:
            <input type="text" id="varietySpecies" placeholder="e.g., Alphonso Mango, Red Delicious Apple" required>
          </label>
        </div>

        <div class="form-row">
          <label>Harvest Quantity:
            <input type="number" id="harvestQuantity" placeholder="e.g., 500" required min="1">
          </label>
          <label>Unit of Sale:
            <select id="unitOfSale" required>
              <option value="">Select Unit</option>
              <option value="kg">Kilograms (kg)</option>
              <option value="quintal">Quintals (100 kg)</option>
              <option value="ton">Tons (1000 kg)</option>
              <option value="box">Box</option>
              <option value="dozen">Dozen</option>
            </select>
          </label>
        </div>

        <div class="form-row">
          <label>Target Price (â‚¹):
            <input type="number" id="targetPrice" placeholder="e.g., 50" required min="0">
          </label>
          <label id="priceUnitLabel" style="align-self: flex-end; font-weight: normal; color: #6b7280;"></label>
        </div>

        <div class="form-row">
          <label>Product Image:
            <input type="file" id="image" accept="image/*" required>
          </label>
        </div>
        
        <button type="submit" class="submit-btn">âœ¨ List Product</button>
      </form>

      <div class="products-grid" id="productsGrid">
        </div>
    </section>

    <section id="notificationsSection" style="display: none;">
      <div class="section-header">
        <h2>ğŸ”” Notifications</h2>
      </div>
      
      <div class="notifications-panel" id="notificationsList">
        </div>
    </section>

    <section id="ordersSection" style="display: none;">
      <div class="section-header">
        <h2>ğŸ“¦ My Orders</h2>
      </div>

      <div class="orders-grid" id="farmerOrdersGrid">
        </div>
    </section>

    <section id="profileSection" style="display: none;">
      <div class="section-header">
        <h2>ğŸ‘¤ My Profile</h2>
      </div>

      <div class="profile-container">
        <div class="profile-card" id="profileInfo">
          </div>

        <form id="editProfileForm" style="display: none;" class="profile-card edit-profile-form">
          <h3>Edit Additional Details</h3>

          <label>Farm Location</label>
          <input type="text" id="editFarmLocation" placeholder="Enter farm location">

          <label>Latitude</label>
          <input type="text" id="editLatitude" readonly>

          <label>Longitude</label>
          <input type="text" id="editLongitude" readonly>

          <button type="button" id="getGeoBtn" class="geo-btn">ğŸ“ Get Current Location</button>

          <label>Farm Size</label>
          <input type="text" id="editFarmSize" placeholder="Enter farm size (e.g. 5 acres)">

          <div class="form-actions">
            <button type="submit" id="saveProfileBtn" class="save-btn">ğŸ’¾ Save Changes</button>
            <button type="button" id="cancelEditBtn" class="cancel-btn">âœ– Cancel</button>
          </div>
        </form>
      </div>
    </section>
  </div>

  <div id="farmerReceiptModal" class="modal">
    <div class="modal-content" style="max-width: 700px;">
      <span class="close" onclick="closeFarmerReceiptModal()">&times;</span>
      <div id="farmerReceiptContent"></div>
      <div style="text-align: center; margin-top: 20px;">
        <button class="btn-primary" onclick="printFarmerReceipt()">ğŸ–¨ï¸ Print Receipt</button>
      </div>
    </div>
  </div>

  <script src="../assets/js/farmer.js"></script>
</body>
</html>